const bel = require("bel")
const csjs = require('csjs-inject')
const colors = require('theme')
const date = require('getDate')
const copy = require('copy-text-to-clipboard')
const moreInfo = require('moreInfo')

module.exports = makeDeployReceipt

var css = csjs`
.txReceipt {
  display:flex;
  justify-content: flex-start;
  flex-direction: column;
}
.txReturnField {
  display:flex;
  justify-content: flex-start;
  flex-direction: column;
  margin-bottom: 2%;
}
.txReturnTitle {
  color: ${colors.lightGrey};
  margin-right: 5px;
  width: 50%;
}
.txReturnValue {
  color: ${colors.slateGrey};
  cursor: pointer;
  word-break: break-all;
}
.txReturnValue:hover {
  cursor: pointer;
  opacity: 0.6;
}
.date {}
`

function makeDeployReceipt (provider, contract) {
  var el = bel`
    <div class=${css.txReceipt}>
      <div class=${css.txReturnField}>
        <div class=${css.txReturnTitle}>published</div>
        <div class=${css.txReturnValue}>${date()}</div>
      </div>
      <div class=${css.txReturnField} title="${contract.deployTransaction.creates}" onclick=${()=>copy(contract.deployTransaction.creates)}>
        <div class=${css.txReturnTitle}>contract address (${provider._network.name}):</div>
        <div class=${css.txReturnValue}>${contract.deployTransaction.creates}</div>
      </div>
      <div class=${css.txReturnField} title="${contract.deployTransaction.from}" onclick=${()=>copy(contract.deployTransaction.from)}>
        <div class=${css.txReturnTitle}>published by</div>
        <div class=${css.txReturnValue}>${contract.deployTransaction.from}</div>
      </div>
    </div>
  `
  el.appendChild(moreInfo(provider._network.name, contract.deployTransaction.hash))
  return el
}

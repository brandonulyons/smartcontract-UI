const ethers = require('ethers')
const bigNumber = require('bignumber.js')

module.exports = convertToEther

function convertToEther (currency, amount) {
  var amount = getAmount(currency, amount).toFormat().split(',').join('')
  amount = ethers.utils.formatEther(amount)
  return ethers.utils.parseEther(amount)
}

function getAmount (currency, amount) {
  var base = new bigNumber(1000)
  if (currency === 't-ether') return base.exponentiatedBy(10).multipliedBy(amount)
  if (currency === 'g-ether') return base.exponentiatedBy(9).multipliedBy(amount)
  if (currency === 'm-ether') return base.exponentiatedBy(8).multipliedBy(amount)
  if (currency === 'k-ether') return base.exponentiatedBy(7).multipliedBy(amount)
  if (currency === 'ether')   return base.exponentiatedBy(6).multipliedBy(amount)
  if (currency === 'milli')   return base.exponentiatedBy(5).multipliedBy(amount)
  if (currency === 'micro')   return base.exponentiatedBy(4).multipliedBy(amount)
  if (currency === 'g-wei')   return base.exponentiatedBy(3).multipliedBy(amount)
  if (currency === 'm-wei')   return base.exponentiatedBy(2).multipliedBy(amount)
  if (currency === 'k-wei')   return base.exponentiatedBy(1).multipliedBy(amount)
  if (currency === 'wei')     return amount
}

const ethers = require('ethers')
const decodeTxReturn = require('decodeTxReturn')

module.exports = decodeTxCalldata

function decodeTxCalldata (txData, contract, fun, solcMetadata) {
  var iface = new ethers.utils.Interface(solcMetadata.output.abi);

  var tx = { data: txData }

  var args = iface.parseTransaction(tx).args
  var fnInputs = contract.interface.functions[fun].inputs
  var types = []
  for (var i = 0; i<fnInputs.length; i++) {
    types.push(fnInputs[i].type)
    console.log(types)
  }
  var decodedArgs = decodeTxReturn(args, types)
  return decodedArgs
}
